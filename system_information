#!/bin/bash


HOSTNAME=$(hostname)
OS=$(cat /etc/os-release | grep "^PRETTY_NAME" | cut -d'=' -f2- | tr -d '"')
UPTIME=$(uptime -p)


CPU=$(grep "model name" /proc/cpuinfo | head -n1 | cut -d':' -f2 | sed 's/^[ \t]*//')
CPU_SPEED=$(lscpu | grep "MHz" | awk '{print $3}')
RAM=$(free -h | awk '/^Mem/ {print $2}')
DISKS=$(lsblk -o NAME,MODEL,SIZE | grep -v "NAME")
VIDEO=$(lspci | grep "VGA compatible controller" | awk -F'[: ]' '{print $3, $4}')


FQDN=$(hostname -f)
IP_ADDRESS=$(hostname -I | cut -d' ' -f1)
GATEWAY=$(ip route | grep "default" | awk '{print $3}')
DNS_SERVER=$(cat /etc/resolv.conf | grep "^nameserver" | awk '{print $2}')


INTERFACE=$(ip -o link show | awk -F': ' '{print $2}')
INTERFACE_IP=$(ip -o -4 addr show | awk '{print $4}' | grep -v "127.0.0.1")

USERS=$(who | awk '{print $1}' | tr '\n' ',')
DISK_SPACE=$(df -h | awk '{print $6, $4}' | grep -v "Mounted" | tr '\n' ',')
PROCESS_COUNT=$(ps aux --no-header | wc -l)
LOAD_AVERAGES=$(cat /proc/loadavg | awk '{print $1, $2, $3}')
MEMORY_ALLOCATION=$(free -h | awk '/^Mem/ {print $3 "/" $2}')
LISTENING_PORTS=$(ss -tuln | awk '$1 == "LISTEN" {print $5}' | cut -d':' -f2 | tr '\n' ',')
UFW_RULES=$(sudo ufw status | grep -E "^[0-9]" | awk '{print $2}' | tr '\n' ',')


echo ""
echo "System Report generated by $(whoami), $(date)"
echo ""
echo "System Information"
echo "------------------"
echo "Hostname: $HOSTNAME"
echo "OS: $OS"
echo "Uptime: $UPTIME"
echo ""
echo "Hardware Information"
echo "--------------------"
echo "CPU: $CPU"
echo "Speed: $CPU_SPEED MHz"
echo "RAM: $RAM"
echo "Disk(s): $DISKS"
echo "Video: $VIDEO"
echo ""
echo "Network Information"
echo "-------------------"
echo "FQDN: $FQDN"
echo "Host Address: $IP_ADDRESS"
echo "Gateway IP: $GATEWAY"
echo "DNS Server: $DNS_SERVER"
echo ""
echo "InterfaceName: $INTERFACE"
echo "IP Address: $INTERFACE_IP"
echo ""
echo "System Status"
echo "-------------"
echo "Users Logged In: ${USERS%,}"
echo "Disk Space: ${DISK_SPACE%,}"
echo "Process Count: $PROCESS_COUNT"
echo "Load Averages: $LOAD_AVERAGES"
echo "Memory Allocation: $MEMORY_ALLOCATION"
echo "Listening Network Ports: ${LISTENING_PORTS%,}"
echo "UFW Rules: ${UFW_RULES%,}"
echo ""
